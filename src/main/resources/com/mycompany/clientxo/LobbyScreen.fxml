<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<StackPane styleClass="root-container" stylesheets="@styles.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.mycompany.clientxo.presentation.lobbyscreen.LobbyScreenController">

    <padding>
        <Insets bottom="24" left="24" right="24" top="24" />
    </padding>

    <!-- Main Content -->
    <VBox alignment="TOP_CENTER" maxWidth="700" spacing="24" StackPane.alignment="CENTER">
        <padding>
            <Insets top="20" /> 
        </padding>

        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="20">
            <!-- Back Button -->
            <Button fx:id="btnBack" onAction="#onBack" styleClass="back-button">
                <graphic>
                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <SVGPath content="M19 12H5M12 19l-7-7 7-7" styleClass="back-icon" />
                        <Label styleClass="back-label" text="Back" />
                    </HBox>
                </graphic>
            </Button>
            
            <VBox alignment="CENTER_LEFT" spacing="4">
                <Label style="-fx-font-size: 28px;" styleClass="game-title" text="Lobby" />
                <Label style="-fx-font-size: 14px;" styleClass="game-subtitle" text="Network Play" />
            </VBox>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <!-- User Profile Summary (Right) -->
             <HBox alignment="CENTER_RIGHT" spacing="12" styleClass="player-item" style="-fx-padding: 8 16; -fx-background-color: rgba(255,255,255,0.1);">
                <VBox alignment="CENTER_RIGHT" spacing="2">
                     <Label fx:id="lblUserName" text="Guest" styleClass="player-name" style="-fx-font-size: 14px;"/>
                     <Label fx:id="lblUserScore" text="Score: 0" styleClass="player-score"/>
                </VBox>
                 <StackPane styleClass="player-avatar" style="-fx-min-width: 32; -fx-min-height: 32;">
                     <Label fx:id="lblUserChar" text="ðŸ¤–" styleClass="player-avatar-text" style="-fx-font-size: 18px;"/>
                 </StackPane>
                 <Button onAction="#onProfile" styleClass="game-button, game-button-outline" style="-fx-padding: 4 8; -fx-font-size: 10px;" text="Edit"/>
             </HBox>
        </HBox>

        <!-- Main Card -->
        <VBox styleClass="game-card" VBox.vgrow="ALWAYS" spacing="0">
            
            <!-- Tabs / Filter -->
            <HBox spacing="0" style="-fx-border-color: rgba(255,255,255,0.1); -fx-border-width: 0 0 1 0;">
                <Button fx:id="btnTabFriends" text="Online Friends" onAction="#onTabFriends" 
                        styleClass="game-button, game-button-outline" 
                        style="-fx-background-radius: 20 0 0 0; -fx-border-radius: 20 0 0 0; -fx-border-width: 0 0 2 0; -fx-min-width: 150;" 
                        maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
                        
                <Button fx:id="btnTabLeaderboard" text="Leaderboard" onAction="#onTabLeaderboard"
                        styleClass="game-button, game-button-outline" 
                        style="-fx-background-radius: 0 20 0 0; -fx-border-radius: 0 20 0 0; -fx-border-width: 0 0 2 0; -fx-min-width: 150;" 
                        maxWidth="Infinity" HBox.hgrow="ALWAYS"/>
            </HBox>

            <VBox spacing="10" VBox.vgrow="ALWAYS">
                <padding>
                    <Insets bottom="20" left="20" right="20" top="20" />
                </padding>
                
                <!-- Status Header (For Friends View) -->
                <HBox fx:id="friendsHeader" alignment="CENTER_LEFT" spacing="10">
                    <Label fx:id="lblOnlineCount" style="-fx-text-fill: #10b981; -fx-font-size: 14px;" styleClass="input-label" text="Online (0)" />
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label fx:id="lblOfflineCount" style="-fx-text-fill: #6b7280; -fx-font-size: 14px;" styleClass="input-label" text="Offline (0)" />
                </HBox>

                <ScrollPane fitToWidth="true" hbarPolicy="NEVER" style="-fx-background: transparent; -fx-background-color: transparent;" VBox.vgrow="ALWAYS">
                    <content>
                        <VBox fx:id="listContainer" spacing="12" style="-fx-background-color: transparent;">
                             <!-- Items injected here -->
                        </VBox>
                    </content>
                </ScrollPane>
            </VBox>
            
        </VBox>
        
        <!-- Footer Actions -->
        <HBox alignment="CENTER_RIGHT">
             <Button onAction="#onRecordedGames" text="Game History" styleClass="game-button, game-button-secondary">
                 <graphic>
                      <SVGPath content="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z" styleClass="button-icon" style="-fx-scale-x: 0.8; -fx-scale-y: 0.8;"/>
                 </graphic>
             </Button>
        </HBox>
        
    </VBox>

</StackPane>
